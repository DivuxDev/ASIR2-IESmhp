create database if not exists empresa;
USE empresa;

CREATE TABLE DEPARTAMENTOS (
    DEPT_NO INTEGER PRIMARY KEY AUTO_INCREMENT,
    DNOMBRE VARCHAR(14) NULL,
    LOC VARCHAR(14) UNIQUE
)ENGINE=INNODB;

CREATE TABLE EMPLEADOS (
    EMP_NO INTEGER(4) PRIMARY KEY,
    NOMBRE VARCHAR(10),
	APELLIDO VARCHAR(10),
    OFICIO VARCHAR(20),
	CATEGORIA ENUM('A1','A2','B1','C1','D1'),
    FECHA_ALT DATE,
    SALARIO NUMERIC(7,2),
    COMISION DECIMAL(7,2),
    DEPT_NO INTEGER,
	JEFE_NO INTEGER(4)
)ENGINE=INNODB;

INSERT INTO DEPARTAMENTOS VALUES (NULL,'CONTABILIDAD','SEVILLA');
INSERT INTO DEPARTAMENTOS VALUES (NULL,'INVESTIGACION','MADRID');
INSERT INTO DEPARTAMENTOS VALUES (NULL,'VENTAS','BARCELONA');
INSERT INTO DEPARTAMENTOS VALUES (NULL,'PRODUCCION','BILBAO');

INSERT INTO EMPLEADOS  VALUES (7369,'PEDRO','SANCHEZ','EMPLEADO','A2','1990/12/17',1040.00,NULL,2,7654);
INSERT INTO EMPLEADOS VALUES (7499,'NACHO','ARROYO','VENDEDOR','B1','1990/02/20',1500.00,390,3,7654);
INSERT INTO EMPLEADOS VALUES (7521,'ROSA','SALA','VENDEDOR','D1','1991/02/22',1625.00,650,3,7654);
INSERT INTO EMPLEADOS VALUES (7566,'SARA','JIMENEZ','RESP. ALMACEN','D1','1991/04/02',2900.00,NULL,2,7654);
INSERT INTO EMPLEADOS VALUES (7698,'CRISTINA','NEGRO','RESP. ALMACEN','D1','1991/05/01',3005.00,NULL,3,NULL);
INSERT INTO EMPLEADOS VALUES (7782,'RUBEN','CEREZO','RESP. ALMACEN','D1','1991/06/09',2885.00,NULL,1,7698);
INSERT INTO EMPLEADOS VALUES (7788,'VICENTE','GIL','ANALISTA','A1','1991/11/09',3000.00,NULL,NULL,7698);
INSERT INTO EMPLEADOS VALUES (7654,'MONICA','MARTIN','VENDEDOR','D1','1991/09/29',1600.00,1020,3,NULL);
INSERT INTO EMPLEADOS VALUES (7839,'MANUEL','REY','PRESIDENTE','A2','1991/11/17',4100.00,NULL,1,NULL);
INSERT INTO EMPLEADOS VALUES (7844,'HECTOR','TOVAR','VENDEDOR','C1','1991/09/08',1350.00,0,3,7698);
INSERT INTO EMPLEADOS VALUES (7876,'MARIO','ALONSO','EMPLEADO','C1','1991/09/23',1430.00,NULL,NULL,7698);
INSERT INTO EMPLEADOS VALUES (7900,'SUSANA','JIMENO','EMPLEADO','B1','1991/12/03',1335.00,NULL,3,7698);
INSERT INTO EMPLEADOS VALUES (7902,'PEDRO','FERNANDEZ','ANALISTA','C1','1991/12/03',3000.00,NULL,2,7698);
INSERT INTO EMPLEADOS VALUES (7934,'JAVIER','MUÃ‘OZ','EMPLEADO','A2','1992/01/23',1690.00,NULL,1,7698);

ALTER TABLE EMPLEADOS
ADD CONSTRAINT FK_EMP_DeptN FOREIGN KEY (DEPT_NO) REFERENCES DEPARTAMENTOS(DEPT_NO)
	ON UPDATE CASCADE ON DELETE RESTRICT,
ADD CONSTRAINT FK_EMP_Jefe FOREIGN KEY (JEFE_NO) REFERENCES EMPLEADOS(EMP_NO)
	ON UPDATE CASCADE ON DELETE RESTRICT
;